[![Build Status](https://travis-ci.com/IBM/node-sdk-core.svg?branch=master)](https://travis-ci.com/IBM/node-sdk-core)
[![npm-version](https://img.shields.io/npm/v/ibm-cloud-sdk-core.svg)](https://www.npmjs.com/package/ibm-cloud-sdk-core)
[![codecov](https://codecov.io/gh/IBM/node-sdk-core/branch/master/graph/badge.svg)](https://codecov.io/gh/IBM/node-sdk-core)
[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg)](https://github.com/semantic-release/semantic-release)
[![CLA assistant](https://cla-assistant.io/readme/badge/ibm/node-sdk-core)](https://cla-assistant.io/ibm/node-sdk-core)

# node-sdk-core
This project contains the core functionality used by Node SDK's generated by the IBM OpenAPI 3 SDK Generator (`openapi-sdkgen`).
Code generated by `openapi-sdkgen` will depend on the functionality contained in this project.

## Installation
`npm install ibm-cloud-sdk-core`

## Usage
This package exports a single object containing a number of modules as top level properties.

Example:
```js
// this is TypeScript, since the `openapi-sdkgen` project generates TypeScript
import { BaseService } from 'ibm-cloud-sdk-core';

class YourSDK extends BaseService { ... }
```

## Authentication
This library provides a set of Authenticators used to authenticate requests from an SDK. There are authenticators for the following authentication schemes:
- No Auth
- Basic
- Bearer Token
- IAM
- CP4D

There are two ways to create an authenticator:
1. Creating an instance and providing credentials programmatically
2. Using the `getAuthenticatorFromEnvironment` function to create an authenticator from externally-provided configuration

### NoAuth
Used for sending requests to an unprotected service or for testing.

Programmatic:
```js
import { NoAuthAuthenticator } from 'ibm-cloud-sdk-core';

const authenticator = new NoAuthAuthenticator();
```

External config:
```js
import { getAuthenticatorFromEnvironment } from 'ibm-cloud-sdk-core';

// env vars
// MY_SERVICE_AUTH_TYPE=noauth
const noAuthAuthenticator = getAuthenticatorFromEnvironment('my-service');
```

### Basic
Used to generate an Authorization header with the format `Basic <encoded credentials>`.

Programmatic:
```js
import { BasicAuthenticator } from 'ibm-cloud-sdk-core';

const authenticator = new BasicAuthenticator({
  username: '{username}',
  password: '{password}',
});
```

External config:
```js
import { getAuthenticatorFromEnvironment } from 'ibm-cloud-sdk-core';

// env vars
// MY_SERVICE_AUTH_TYPE=basic
// MY_SERVICE_USERNAME=<username>
// MY_SERVICE_PASSWORD=<password>
const basicAuthenticator = getAuthenticatorFromEnvironment('my-service');
```

### Bearer Token
Used to generate an Authorization header with the format `Bearer <token>`.

Programmatic:
```js
import { BearerTokenAuthenticator } from 'ibm-cloud-sdk-core';

const authenticator = new BearerTokenAuthenticator({
  bearerToken: '{bearerToken}',
});
```

External config:
```js
import { getAuthenticatorFromEnvironment } from 'ibm-cloud-sdk-core';

// env vars
// MY_SERVICE_AUTH_TYPE=bearerToken
// MY_SERVICE_BEARER_TOKEN=<bearerToken>
const bearerTokenAuthenticator = getAuthenticatorFromEnvironment('my-service');
```

### IAM
Used to manage and authenticate with IAM tokens.

Programmatic:
```js
import { IamAuthenticator } from 'ibm-cloud-sdk-core';

const authenticator = new IamAuthenticator({
  apikey: '{apikey}',
});
```

External config:
```js
import { getAuthenticatorFromEnvironment } from 'ibm-cloud-sdk-core';

// env vars
// MY_SERVICE_AUTH_TYPE=iam
// MY_SERVICE_APIKEY=<apikey>
const iamAuthenticator = getAuthenticatorFromEnvironment('my-service');
```

### CloudPakForData
Used to manage and authenticate with tokens for services on IBM Cloud Pak for Data.

Programmatic:
```js
import { CloudPakForDataAuthenticator } from 'ibm-cloud-sdk-core';

const authenticator = new CloudPakForDataAuthenticator({
  username: '{username}',
  password: '{password}',
  url: '{url}',
});
```

External config:
```js
import { getAuthenticatorFromEnvironment } from 'ibm-cloud-sdk-core';

// env vars
// MY_SERVICE_AUTH_TYPE=cp4d
// MY_SERVICE_AUTH_URL=<url>
// MY_SERVICE_USERNAME=<username>
// MY_SERVICE_PASSWORD=<password>
const cp4dAuthenticator = getAuthenticatorFromEnvironment('my-service');
```
